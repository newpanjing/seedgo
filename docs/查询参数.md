# 查询参数

> /api/system/users?keyword=&page=1&pageSize=10&sortBy=

## 参数说明

| 参数名称      | 参数类型   | 描述                       |
|-----------|--------|--------------------------|
| keyword   | string | 搜索关键字                    |
| page      | number | 页码,默认为1                  |
| pageSize  | number | 每页数量,默认为10               |
| sortBy    | string | 排序字段,默认为 id              |
| sortOrder | string | 排序顺序,默认为desc,可选：asc,desc |

## keyword 字段

需要在model中实现 `SearchFields` 方法，返回一个包含字段名称的数组，用于搜索。

```go
package user

import "seedgo/internal/model"

// User 是用户模型
type User struct {
	ID       model.ID      `json:"id"`
	Username string        `json:"username"`
	TenantID model.ID      `json:"tenantId"`
	IsSuper  bool          `json:"isSuper"`
	Roles    []*model.Role `json:"roles"`
}

// SearchFields 返回需要搜索的字段名称数组
func (u *User) SearchFields() []string {
	return []string{"username", "realName"}
}

```

## 查询条件

默认会排除：keyword, page, pageSize, sortBy, sortOrder，其他字段会根据模型的定义进行查询。

## 字段名匹配

用传入的字段去获取model配置的gorm数据库字段，如果没有配置，就默认用驼峰转下划线工具转换。


## 高阶用法

| 参数名称          | 参数类型 | 描述                                |
|---------------|------|-----------------------------------|
| name          | =    | where name='abc'，默认字符串=like，数值=等于 |
| name__in      | in   | where name in ('a','b','c')       |
| name__contain | like | where name like '%a%'             |
| name__gt      | `>`  | where name > 'a'                  |
| name__gte     | `>=` | where name >= 'a'                 |
| name__lt      | `<`  | where name < 'a'                  |
| name__lte     | `<=` | where name <= 'a'                 |

例如：

+ 返回所有用户名中包含 abc 的用户

> /api/system/users?name__contain=abc

+ 返回所有用户 ID 大于 1 的用户

> /api/system/users?id__gt=1

+ age不存在user中，忽略这个age，并在控制台打印警告信息

> /api/system/users?age=10
